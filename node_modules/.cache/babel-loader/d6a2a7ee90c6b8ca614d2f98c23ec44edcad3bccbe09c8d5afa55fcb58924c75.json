{"ast":null,"code":"import _objectSpread from\"/workspaces/bibioteca/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';// 1. Imports de Firebase SDK\nimport{initializeApp}from\"firebase/app\";import{getAnalytics}from\"firebase/analytics\";import{getAuth,onAuthStateChanged,signInAnonymously,signInWithCustomToken,signOut}from'firebase/auth';import{getFirestore,collection,addDoc,updateDoc,deleteDoc,doc,onSnapshot,query,orderBy,serverTimestamp}from'firebase/firestore';import{Book,Heart,Plus,Trash2,Edit2,LogOut,Save,X,ArrowRight,Library,BookOpen}from'lucide-react';// --- CONFIGURACIÓN DE FIREBASE \nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyDOXDeqj91LMzH05pQEsYUB5w-Fm0r0Y74\",authDomain:\"mibibliotecaapp-c5222.firebaseapp.com\",projectId:\"mibibliotecaapp-c5222\",storageBucket:\"mibibliotecaapp-c5222.firebasestorage.app\",messagingSenderId:\"4212262774\",appId:\"1:4212262774:web:dca93353247e1e52d01c57\",measurementId:\"G-8KMN7VM311\"};// 2. Inicialización de FIREBASE\nconst app=initializeApp(firebaseConfig);const analytics=getAnalytics(app);//se activa analitics\nconst auth=getAuth(app);const db=getFirestore(app);// --- COMPONENTES UI ---\nconst Button=_ref=>{let{children,onClick,variant='primary',className='',type='button'}=_ref;const variants={primary:'bg-blue-600 hover:bg-blue-700 text-white',success:'bg-green-600 hover:bg-green-700 text-white',danger:'bg-red-500 hover:bg-red-600 text-white',secondary:'bg-gray-200 hover:bg-gray-300 text-gray-800',outline:'border-2 border-blue-600 text-blue-600 hover:bg-blue-50'};return/*#__PURE__*/_jsx(\"button\",{type:type,onClick:onClick,className:\"px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center gap-2 \".concat(variants[variant],\" \").concat(className),children:children});};const Card=_ref2=>{let{children,className=''}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden \".concat(className),children:children});};const Badge=_ref3=>{let{children,color}=_ref3;return/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold \".concat(color),children:children});};// --- COMPONENTE PRINCIPAL ---\nexport default function App(){const[user,setUser]=useState(null);const[books,setBooks]=useState([]);const[view,setView]=useState('collection');// 'collection' o 'wishlist'\nconst[loading,setLoading]=useState(true);const[showModal,setShowModal]=useState(false);const[editingBook,setEditingBook]=useState(null);// Estado del formulario\nconst[formData,setFormData]=useState({title:'',author:'',genre:'',notes:''});// 1. Inicialización de Autenticación\nuseEffect(()=>{// Escuchamos el estado de autenticación\nconst unsubscribe=onAuthStateChanged(auth,currentUser=>{setUser(currentUser);setLoading(false);});// Intentamos iniciar sesión automáticamente si no hay usuario (Demo)\n// En tu app real, podrías quitar esto y dejar solo el botón de login\nif(!auth.currentUser){// Opcional: Iniciar sesión anónima automáticamente\n// signInAnonymously(auth).catch(console.error);\n}return()=>unsubscribe();},[]);// 2. Carga de Datos (Libros)\nuseEffect(()=>{if(!user)return;// Ruta limpia para tu base de datos: users/{uid}/books\nconst booksRef=collection(db,'users',user.uid,'books');// Consulta simple\nconst q=query(booksRef);const unsubscribe=onSnapshot(q,snapshot=>{const booksData=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));// Ordenamiento básico en cliente por fecha\nbooksData.sort((a,b)=>{var _b$createdAt,_a$createdAt;return(((_b$createdAt=b.createdAt)===null||_b$createdAt===void 0?void 0:_b$createdAt.seconds)||0)-(((_a$createdAt=a.createdAt)===null||_a$createdAt===void 0?void 0:_a$createdAt.seconds)||0);});setBooks(booksData);},error=>{console.error(\"Error fetching books:\",error);});return()=>unsubscribe();},[user]);// --- MANEJADORES DE ACCIÓN ---\nconst handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const openModal=function(){let bookToEdit=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(bookToEdit){setEditingBook(bookToEdit);setFormData({title:bookToEdit.title,author:bookToEdit.author,genre:bookToEdit.genre,notes:bookToEdit.notes||''});}else{setEditingBook(null);setFormData({title:'',author:'',genre:'',notes:''});}setShowModal(true);};const handleSaveBook=async e=>{e.preventDefault();if(!user)return;// Referencia a la colección de libros del usuario\nconst booksRef=collection(db,'users',user.uid,'books');try{if(editingBook){// Editar existente\nawait updateDoc(doc(booksRef,editingBook.id),_objectSpread(_objectSpread({},formData),{},{updatedAt:serverTimestamp()}));}else{// Crear nuevo (el estado depende de la vista actual)\nawait addDoc(booksRef,_objectSpread(_objectSpread({},formData),{},{status:view,// 'collection' o 'wishlist'\ncreatedAt:serverTimestamp()}));}setShowModal(false);}catch(error){console.error(\"Error saving book:\",error);alert(\"Error al guardar. Intenta nuevamente.\");}};const handleDelete=async bookId=>{if(!confirm(\"¿Estás seguro de eliminar este libro?\"))return;try{const bookRef=doc(db,'users',user.uid,'books',bookId);await deleteDoc(bookRef);}catch(error){console.error(\"Error deleting:\",error);}};const handleMoveToCollection=async book=>{try{const bookRef=doc(db,'users',user.uid,'books',book.id);await updateDoc(bookRef,{status:'collection',updatedAt:serverTimestamp()});}catch(error){console.error(\"Error moving book:\",error);}};// Filtrar libros según la vista actual\nconst currentBooks=books.filter(book=>book.status===view);// --- RENDERIZADO ---\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 text-blue-600\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}// Vista Login\nif(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 p-4\",children:/*#__PURE__*/_jsxs(Card,{className:\"max-w-md w-full p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto bg-blue-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-6\",children:/*#__PURE__*/_jsx(Library,{className:\"w-10 h-10 text-blue-600\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"Mi Biblioteca\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-8\",children:\"Gestiona tu colecci\\xF3n de libros y tu lista de deseos en un solo lugar.\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>signInAnonymously(auth),className:\"w-full py-3\",children:\"Ingresar como Invitado\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-400 mt-4\",children:\"Nota: Al ser tu primera vez, aseg\\xFArate de tener habilitado \\\"Auth An\\xF3nimo\\\" en la consola de Firebase o usa Email/Google si lo configuraste.\"})]})});}// Vista Principal (Dashboard)\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 font-sans text-gray-800\",children:[/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white shadow-sm sticky top-0 z-10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 py-3 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"text-blue-600 w-6 h-6\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-xl hidden sm:block\",children:\"BiblioManager\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 hidden sm:block\",children:[\"Usuario: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono text-xs\",children:[user.uid.slice(0,6),\"...\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>signOut(auth),className:\"text-gray-500 hover:text-red-500 transition-colors\",title:\"Cerrar Sesi\\xF3n\",children:/*#__PURE__*/_jsx(LogOut,{className:\"w-5 h-5\"})})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"max-w-6xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-1 rounded-lg shadow-sm border border-gray-200 inline-flex\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('collection'),className:\"px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 \".concat(view==='collection'?'bg-blue-600 text-white shadow-sm':'text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Library,{className:\"w-4 h-4\"}),\"Mi Colecci\\xF3n\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setView('wishlist'),className:\"px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 \".concat(view==='wishlist'?'bg-purple-600 text-white shadow-sm':'text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Heart,{className:\"w-4 h-4\"}),\"Lista de Deseos\"]})]}),/*#__PURE__*/_jsxs(Button,{onClick:()=>openModal(),variant:view==='collection'?'primary':'success',children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),view==='collection'?'Nuevo Libro':'Agregar Deseo']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-1\",children:view==='collection'?'Mis Libros':'Lista de Deseos'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm\",children:[\"Tienes \",currentBooks.length,\" \",currentBooks.length===1?'item':'items',\" en esta lista.\"]})]}),currentBooks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-20 bg-white rounded-xl border border-dashed border-gray-300\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Book,{className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"No hay libros aqu\\xED\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"\\xA1Comienza agregando uno a tu lista!\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>openModal(),variant:\"outline\",children:\"Agregar ahora\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:currentBooks.map(book=>/*#__PURE__*/_jsxs(Card,{className:\"flex flex-col h-full hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsx(Badge,{color:view==='collection'?'bg-blue-100 text-blue-700':'bg-purple-100 text-purple-700',children:book.genre||'General'}),view==='wishlist'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleMoveToCollection(book),className:\"text-green-600 hover:bg-green-50 p-1 rounded transition-colors\",title:\"Mover a Mi Colecci\\xF3n\",children:/*#__PURE__*/_jsx(ArrowRight,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-1 line-clamp-2\",children:book.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4 font-medium\",children:book.author}),book.notes&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-lg text-sm text-gray-600 italic mb-4\",children:[\"\\\"\",book.notes,\"\\\"\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-5 py-3 border-t border-gray-100 flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openModal(book),className:\"p-2 text-gray-500 hover:text-blue-600 hover:bg-white rounded-full transition-all\",children:/*#__PURE__*/_jsx(Edit2,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(book.id),className:\"p-2 text-gray-500 hover:text-red-600 hover:bg-white rounded-full transition-all\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]},book.id))})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in duration-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-6 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-900\",children:editingBook?'Editar Libro':view==='collection'?'Nuevo Libro':'Nuevo Deseo'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveBook,className:\"p-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",required:true,value:formData.title,onChange:handleInputChange,className:\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all\",placeholder:\"Ej. Cien A\\xF1os de Soledad\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Autor\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",required:true,value:formData.author,onChange:handleInputChange,className:\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\",placeholder:\"Ej. Gabriel Garc\\xEDa M\\xE1rquez\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"G\\xE9nero\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"genre\",value:formData.genre,onChange:handleInputChange,className:\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\",placeholder:\"Ej. Realismo M\\xE1gico\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Notas Personales\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"notes\",rows:\"3\",value:formData.notes,onChange:handleInputChange,className:\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\",placeholder:\"\\xBFQu\\xE9 te pareci\\xF3? o \\xBFPor qu\\xE9 quieres leerlo?\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-3 pt-4\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>setShowModal(false),children:\"Cancelar\"}),/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:view==='collection'?'primary':'success',children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),\"Guardar\"]})]})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getAnalytics","getAuth","onAuthStateChanged","signInAnonymously","signInWithCustomToken","signOut","getFirestore","collection","addDoc","updateDoc","deleteDoc","doc","onSnapshot","query","orderBy","serverTimestamp","Book","Heart","Plus","Trash2","Edit2","LogOut","Save","X","ArrowRight","Library","BookOpen","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","analytics","auth","db","Button","_ref","children","onClick","variant","className","type","variants","primary","success","danger","secondary","outline","concat","Card","_ref2","Badge","_ref3","color","App","user","setUser","books","setBooks","view","setView","loading","setLoading","showModal","setShowModal","editingBook","setEditingBook","formData","setFormData","title","author","genre","notes","unsubscribe","currentUser","booksRef","uid","q","snapshot","booksData","docs","map","_objectSpread","id","data","sort","a","b","_b$createdAt","_a$createdAt","createdAt","seconds","error","console","handleInputChange","e","name","value","target","prev","openModal","bookToEdit","arguments","length","undefined","handleSaveBook","preventDefault","updatedAt","status","alert","handleDelete","bookId","confirm","bookRef","handleMoveToCollection","book","currentBooks","filter","slice","onSubmit","required","onChange","placeholder","rows"],"sources":["/workspaces/bibioteca/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n// 1. Imports de Firebase SDK\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { \n  getAuth, \n  onAuthStateChanged, \n  signInAnonymously, \n  signInWithCustomToken,\n  signOut \n} from 'firebase/auth';\nimport { \n  getFirestore, \n  collection, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  doc, \n  onSnapshot, \n  query, \n  orderBy, \n  serverTimestamp \n} from 'firebase/firestore';\nimport { \n  Book, \n  Heart, \n  Plus, \n  Trash2, \n  Edit2, \n  LogOut, \n  Save, \n  X, \n  ArrowRight,\n  Library,\n  BookOpen\n} from 'lucide-react';\n\n// --- CONFIGURACIÓN DE FIREBASE \nconst firebaseConfig = {\n  apiKey: \"AIzaSyDOXDeqj91LMzH05pQEsYUB5w-Fm0r0Y74\",\n  authDomain: \"mibibliotecaapp-c5222.firebaseapp.com\",\n  projectId: \"mibibliotecaapp-c5222\",\n  storageBucket: \"mibibliotecaapp-c5222.firebasestorage.app\",\n  messagingSenderId: \"4212262774\",\n  appId: \"1:4212262774:web:dca93353247e1e52d01c57\",\n  measurementId: \"G-8KMN7VM311\"\n};\n\n// 2. Inicialización de FIREBASE\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app); //se activa analitics\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// --- COMPONENTES UI ---\nconst Button = ({ children, onClick, variant = 'primary', className = '', type = 'button' }) => {\n  const variants = {\n    primary: 'bg-blue-600 hover:bg-blue-700 text-white',\n    success: 'bg-green-600 hover:bg-green-700 text-white',\n    danger: 'bg-red-500 hover:bg-red-600 text-white',\n    secondary: 'bg-gray-200 hover:bg-gray-300 text-gray-800',\n    outline: 'border-2 border-blue-600 text-blue-600 hover:bg-blue-50'\n  };\n  return (\n    <button \n      type={type}\n      onClick={onClick} \n      className={`px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center gap-2 ${variants[variant]} ${className}`}\n    >\n      {children}\n    </button>\n  );\n};\n\nconst Card = ({ children, className = '' }) => (\n  <div className={`bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden ${className}`}>\n    {children}\n  </div>\n);\n\nconst Badge = ({ children, color }) => (\n  <span className={`px-2 py-1 rounded-full text-xs font-semibold ${color}`}>\n    {children}\n  </span>\n);\n\n// --- COMPONENTE PRINCIPAL ---\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [books, setBooks] = useState([]);\n  const [view, setView] = useState('collection'); // 'collection' o 'wishlist'\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingBook, setEditingBook] = useState(null);\n\n  // Estado del formulario\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    genre: '',\n    notes: ''\n  });\n\n  // 1. Inicialización de Autenticación\n  useEffect(() => {\n    // Escuchamos el estado de autenticación\n    const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n      setUser(currentUser);\n      setLoading(false);\n    });\n    \n    // Intentamos iniciar sesión automáticamente si no hay usuario (Demo)\n    // En tu app real, podrías quitar esto y dejar solo el botón de login\n    if (!auth.currentUser) {\n        // Opcional: Iniciar sesión anónima automáticamente\n        // signInAnonymously(auth).catch(console.error);\n    }\n\n    return () => unsubscribe();\n  }, []);\n\n  // 2. Carga de Datos (Libros)\n  useEffect(() => {\n    if (!user) return;\n\n    // Ruta limpia para tu base de datos: users/{uid}/books\n    const booksRef = collection(db, 'users', user.uid, 'books');\n    \n    // Consulta simple\n    const q = query(booksRef); \n\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const booksData = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      // Ordenamiento básico en cliente por fecha\n      booksData.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0));\n      setBooks(booksData);\n    }, (error) => {\n      console.error(\"Error fetching books:\", error);\n    });\n\n    return () => unsubscribe();\n  }, [user]);\n\n  // --- MANEJADORES DE ACCIÓN ---\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const openModal = (bookToEdit = null) => {\n    if (bookToEdit) {\n      setEditingBook(bookToEdit);\n      setFormData({\n        title: bookToEdit.title,\n        author: bookToEdit.author,\n        genre: bookToEdit.genre,\n        notes: bookToEdit.notes || ''\n      });\n    } else {\n      setEditingBook(null);\n      setFormData({ title: '', author: '', genre: '', notes: '' });\n    }\n    setShowModal(true);\n  };\n\n  const handleSaveBook = async (e) => {\n    e.preventDefault();\n    if (!user) return;\n\n    // Referencia a la colección de libros del usuario\n    const booksRef = collection(db, 'users', user.uid, 'books');\n    \n    try {\n      if (editingBook) {\n        // Editar existente\n        await updateDoc(doc(booksRef, editingBook.id), {\n          ...formData,\n          updatedAt: serverTimestamp()\n        });\n      } else {\n        // Crear nuevo (el estado depende de la vista actual)\n        await addDoc(booksRef, {\n          ...formData,\n          status: view, // 'collection' o 'wishlist'\n          createdAt: serverTimestamp()\n        });\n      }\n      setShowModal(false);\n    } catch (error) {\n      console.error(\"Error saving book:\", error);\n      alert(\"Error al guardar. Intenta nuevamente.\");\n    }\n  };\n\n  const handleDelete = async (bookId) => {\n    if (!confirm(\"¿Estás seguro de eliminar este libro?\")) return;\n    try {\n      const bookRef = doc(db, 'users', user.uid, 'books', bookId);\n      await deleteDoc(bookRef);\n    } catch (error) {\n      console.error(\"Error deleting:\", error);\n    }\n  };\n\n  const handleMoveToCollection = async (book) => {\n    try {\n      const bookRef = doc(db, 'users', user.uid, 'books', book.id);\n      await updateDoc(bookRef, {\n        status: 'collection',\n        updatedAt: serverTimestamp()\n      });\n    } catch (error) {\n      console.error(\"Error moving book:\", error);\n    }\n  };\n\n  // Filtrar libros según la vista actual\n  const currentBooks = books.filter(book => book.status === view);\n\n  // --- RENDERIZADO ---\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 text-blue-600\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  // Vista Login\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 p-4\">\n        <Card className=\"max-w-md w-full p-8 text-center\">\n          <div className=\"mx-auto bg-blue-100 p-4 rounded-full w-20 h-20 flex items-center justify-center mb-6\">\n            <Library className=\"w-10 h-10 text-blue-600\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Mi Biblioteca</h1>\n          <p className=\"text-gray-500 mb-8\">\n            Gestiona tu colección de libros y tu lista de deseos en un solo lugar.\n          </p>\n          <Button onClick={() => signInAnonymously(auth)} className=\"w-full py-3\">\n            Ingresar como Invitado\n          </Button>\n          <p className=\"text-xs text-gray-400 mt-4\">\n            Nota: Al ser tu primera vez, asegúrate de tener habilitado \"Auth Anónimo\" en la consola de Firebase o usa Email/Google si lo configuraste.\n          </p>\n        </Card>\n      </div>\n    );\n  }\n\n  // Vista Principal (Dashboard)\n  return (\n    <div className=\"min-h-screen bg-gray-50 font-sans text-gray-800\">\n      \n      {/* Navbar */}\n      <nav className=\"bg-white shadow-sm sticky top-0 z-10\">\n        <div className=\"max-w-6xl mx-auto px-4 py-3 flex justify-between items-center\">\n          <div className=\"flex items-center gap-2\">\n            <BookOpen className=\"text-blue-600 w-6 h-6\" />\n            <h1 className=\"font-bold text-xl hidden sm:block\">BiblioManager</h1>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            <div className=\"text-sm text-gray-500 hidden sm:block\">\n              Usuario: <span className=\"font-mono text-xs\">{user.uid.slice(0,6)}...</span>\n            </div>\n            <button \n              onClick={() => signOut(auth)}\n              className=\"text-gray-500 hover:text-red-500 transition-colors\"\n              title=\"Cerrar Sesión\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      <main className=\"max-w-6xl mx-auto px-4 py-8\">\n        \n        {/* Header y Tabs */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4\">\n          <div className=\"bg-white p-1 rounded-lg shadow-sm border border-gray-200 inline-flex\">\n            <button\n              onClick={() => setView('collection')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${\n                view === 'collection' \n                  ? 'bg-blue-600 text-white shadow-sm' \n                  : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              <Library className=\"w-4 h-4\" />\n              Mi Colección\n            </button>\n            <button\n              onClick={() => setView('wishlist')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-all flex items-center gap-2 ${\n                view === 'wishlist' \n                  ? 'bg-purple-600 text-white shadow-sm' \n                  : 'text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              <Heart className=\"w-4 h-4\" />\n              Lista de Deseos\n            </button>\n          </div>\n\n          <Button onClick={() => openModal()} variant={view === 'collection' ? 'primary' : 'success'}>\n            <Plus className=\"w-4 h-4\" />\n            {view === 'collection' ? 'Nuevo Libro' : 'Agregar Deseo'}\n          </Button>\n        </div>\n\n        {/* Resumen */}\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-1\">\n            {view === 'collection' ? 'Mis Libros' : 'Lista de Deseos'}\n          </h2>\n          <p className=\"text-gray-500 text-sm\">\n            Tienes {currentBooks.length} {currentBooks.length === 1 ? 'item' : 'items'} en esta lista.\n          </p>\n        </div>\n\n\n        {/* Grid de Libros */}\n        {currentBooks.length === 0 ? (\n          <div className=\"text-center py-20 bg-white rounded-xl border border-dashed border-gray-300\">\n            <div className=\"bg-gray-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <Book className=\"w-8 h-8 text-gray-400\" />\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900\">No hay libros aquí</h3>\n            <p className=\"text-gray-500 mb-4\">¡Comienza agregando uno a tu lista!</p>\n            <Button onClick={() => openModal()} variant=\"outline\">\n              Agregar ahora\n            </Button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {currentBooks.map(book => (\n              <Card key={book.id} className=\"flex flex-col h-full hover:shadow-md transition-shadow\">\n                <div className=\"p-5 flex-1\">\n                  <div className=\"flex justify-between items-start mb-2\">\n                    <Badge color={view === 'collection' ? 'bg-blue-100 text-blue-700' : 'bg-purple-100 text-purple-700'}>\n                      {book.genre || 'General'}\n                    </Badge>\n                    {view === 'wishlist' && (\n                      <button \n                        onClick={() => handleMoveToCollection(book)}\n                        className=\"text-green-600 hover:bg-green-50 p-1 rounded transition-colors\"\n                        title=\"Mover a Mi Colección\"\n                      >\n                        <ArrowRight className=\"w-5 h-5\" />\n                      </button>\n                    )}\n                  </div>\n                  \n                  <h3 className=\"text-xl font-bold text-gray-900 mb-1 line-clamp-2\">{book.title}</h3>\n                  <p className=\"text-gray-600 mb-4 font-medium\">{book.author}</p>\n                  \n                  {book.notes && (\n                    <div className=\"bg-gray-50 p-3 rounded-lg text-sm text-gray-600 italic mb-4\">\n                      \"{book.notes}\"\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"bg-gray-50 px-5 py-3 border-t border-gray-100 flex justify-end gap-2\">\n                  <button \n                    onClick={() => openModal(book)}\n                    className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-white rounded-full transition-all\"\n                  >\n                    <Edit2 className=\"w-4 h-4\" />\n                  </button>\n                  <button \n                    onClick={() => handleDelete(book.id)}\n                    className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-white rounded-full transition-all\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </Card>\n            ))}\n          </div>\n        )}\n      </main>\n\n      {/* Modal Formulario*/}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white rounded-2xl w-full max-w-lg shadow-2xl animate-in fade-in zoom-in duration-200\">\n            <div className=\"flex justify-between items-center p-6 border-b border-gray-100\">\n              <h3 className=\"text-xl font-bold text-gray-900\">\n                {editingBook ? 'Editar Libro' : (view === 'collection' ? 'Nuevo Libro' : 'Nuevo Deseo')}\n              </h3>\n              <button onClick={() => setShowModal(false)} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n            \n            <form onSubmit={handleSaveBook} className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Título</label>\n                <input\n                  type=\"text\"\n                  name=\"title\"\n                  required\n                  value={formData.title}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all\"\n                  placeholder=\"Ej. Cien Años de Soledad\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Autor</label>\n                  <input\n                    type=\"text\"\n                    name=\"author\"\n                    required\n                    value={formData.author}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\n                    placeholder=\"Ej. Gabriel García Márquez\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Género</label>\n                  <input\n                    type=\"text\"\n                    name=\"genre\"\n                    value={formData.genre}\n                    onChange={handleInputChange}\n                    className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\n                    placeholder=\"Ej. Realismo Mágico\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Notas Personales</label>\n                <textarea\n                  name=\"notes\"\n                  rows=\"3\"\n                  value={formData.notes}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 outline-none\"\n                  placeholder=\"¿Qué te pareció? o ¿Por qué quieres leerlo?\"\n                />\n              </div>\n\n              <div className=\"flex justify-end gap-3 pt-4\">\n                <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\n                  Cancelar\n                </Button>\n                <Button type=\"submit\" variant={view === 'collection' ? 'primary' : 'success'}>\n                  <Save className=\"w-4 h-4\" />\n                  Guardar\n                </Button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}